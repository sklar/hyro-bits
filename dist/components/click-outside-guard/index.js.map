{"version":3,"sources":["../../../src/components/click-outside-guard/index.ts","../../../src/components/click-outside-guard/click-outside-guard.tsx"],"sourcesContent":["export { ClickOutsideGuard } from './click-outside-guard';\nexport type { ClickOutsideGuardProps } from './click-outside-guard';\n","import styled from '@emotion/styled';\nimport { useCombinedRef } from '@spicy-hooks/core';\nimport React, { forwardRef, HTMLAttributes, useEffect, useRef } from 'react';\n\nexport interface ClickOutsideGuardProps extends HTMLAttributes<HTMLDivElement> {\n  ignore?: Element;\n  listen?: boolean;\n  onClickOutside: () => void;\n}\n\n/**\n * Click outside guard\n * @see https://css-tricks.com/click-outside-detector/\n */\nexport const ClickOutsideGuard = forwardRef<HTMLDivElement, ClickOutsideGuardProps>(\n  ({ ignore, listen, onClickOutside, ...props }, ref) => {\n    const innerRef = useRef<HTMLDivElement>(null);\n    const combinedRef = useCombinedRef(ref, innerRef);\n\n    const onKeyUp = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') onClickOutside();\n      handleEvent(event);\n    };\n\n    const handleEvent = (event: Event) => {\n      if (innerRef.current && innerRef.current.contains(event.target as Node)) return;\n      if (ignore && ignore.contains && ignore.contains(event.target as Node)) {\n        return;\n      }\n      onClickOutside();\n    };\n\n    useEffect(() => {\n      if (listen) {\n        document.addEventListener('mousedown', handleEvent, false);\n        document.addEventListener('touchend', handleEvent, false);\n        document.addEventListener('keyup', onKeyUp);\n\n        return () => {\n          document.removeEventListener('mousedown', handleEvent, false);\n          document.removeEventListener('touchend', handleEvent, false);\n          document.removeEventListener('keyup', onKeyUp);\n        };\n      }\n    });\n\n    return <Container ref={combinedRef} {...props} />;\n  }\n);\n\nconst Container = styled.div`\n  display: contents;\n`;\n"],"mappings":";0jBAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,uBAAAE,IAAA,eAAAC,EAAAH,GCAA,IAAAI,EAAmB,8BACnBC,EAA+B,6BAC/BC,EAAqE,oBAYxDC,KAAoB,cAC/B,CAAC,CAAE,OAAAC,EAAQ,OAAAC,EAAQ,eAAAC,KAAmBC,CAAM,EAAGC,IAAQ,CACrD,IAAMC,KAAW,UAAuB,IAAI,EACtCC,KAAc,kBAAeF,EAAKC,CAAQ,EAE1CE,EAAWC,GAAyB,CACpCA,EAAM,MAAQ,UAAUN,EAAe,EAC3CO,EAAYD,CAAK,CACnB,EAEMC,EAAeD,GAAiB,CAChCH,EAAS,SAAWA,EAAS,QAAQ,SAASG,EAAM,MAAc,GAClER,GAAUA,EAAO,UAAYA,EAAO,SAASQ,EAAM,MAAc,GAGrEN,EAAe,CACjB,EAEA,sBAAU,IAAM,CACd,GAAID,EACF,gBAAS,iBAAiB,YAAaQ,EAAa,EAAK,EACzD,SAAS,iBAAiB,WAAYA,EAAa,EAAK,EACxD,SAAS,iBAAiB,QAASF,CAAO,EAEnC,IAAM,CACX,SAAS,oBAAoB,YAAaE,EAAa,EAAK,EAC5D,SAAS,oBAAoB,WAAYA,EAAa,EAAK,EAC3D,SAAS,oBAAoB,QAASF,CAAO,CAC/C,CAEJ,CAAC,EAEM,EAAAG,QAAA,cAACC,EAAA,CAAU,IAAKL,EAAc,GAAGH,EAAO,CACjD,CACF,EAEMQ,EAAY,EAAAC,QAAO;AAAA;","names":["click_outside_guard_exports","__export","ClickOutsideGuard","__toCommonJS","import_styled","import_core","import_react","ClickOutsideGuard","ignore","listen","onClickOutside","props","ref","innerRef","combinedRef","onKeyUp","event","handleEvent","React","Container","styled"]}